<html>
<head>
<title>Simulador JavaScript</title>



<style type="text/css">
  
.texto1 {  
font-family: Georgia, "Times New Roman", serif;
font-size:32px;
color: red;  
}
    
.texto2 {
font-family: Helvetica, Geneva, Arial, sans-serif;
font-size:12px;
color: green;  
}

.texto3{
font-family:Arial, Helvetica, sans-serif;
font-size:18px;
color:#08088A;
vertical-align:bottom;
}

.playable-code {
  background-color: #F4F7F8;
  border: none;
  border-left: 6px solid  #558ABB;
  border-width: medium medium medium 6px;
  color: #4D4E53;
  height: 200px;
  width: 90%;
  padding: 10px 10px 0px;
}

canvas {
border : 1px gray solid; 
}


</style>

<script type="text/javascript">


function funcioncargar(){

var parrafo3 = document.getElementById("codigo1").value;
document.getElementById("contenedor").innerHTML = parrafo3;

}


function cambiarpagina1(){

var parrafo1 = document.getElementById("codigo1").value;
document.getElementById("contenedor").innerHTML = parrafo1;
}




</script>






</head>


<body onload="funcioncargar()">

<table width="100%" BGCOLOR="#AACCEE">
<tr>
<td colspan=4 BGCOLOR="#1B72D5"><img src="logosimujava.png"></td>
</tr>
<tr>
<tr>


<tr>
<td colspan=4 BGCOLOR="#0080FF">
<blockquote>
<font size="6" face="arial" color="white">
<b>La Tierra se mueve alrededor del Sol</b>
</a>
</td>
</tr>
<tr>
<tr>



<td colspan=4>







<table width="100%" BGCOLOR="#AACCEE">

<tr>
<td width="2%"></td>
<td width="96%">


<font size="4" face="arial" color="#08088A">
<br>
<p>En este ejemplo hay tres im&aacute;genes que giran. El fondo de estrellas y el Sol giran, a diferente velocidad, pero no se desplazan. 
La Tierra gira y se desplaza, describiendo una elipse, a la vez que aumenta su tama&ntilde;o durante un tiempo y lo vuelve a disminuir para 
proporcionar una sensaci&oacute;n de alejamiento y acercamiento.<br><br>
Cuando la Tierra se acerca, pasa por delante del Sol y cuando se aleja pasa por detr&aacute;s del mismo.</p> 

<p>Haz todas las modificaciones que creas oportunas en la animaci&oacute;n, para familiarizarte con el c&oacute;digo.</p>


<p>&nbsp;</p>
</font>
</td>
<td width="2%"></td>
</tr>


</table>











</td>
</tr>





<tr>
<td width="2%"></td>
<td bgcolor="#1B72D5" width="48%">
<img src="logocodigo.png">

</td>
<td bgcolor="#1B72D5" width="48%" valign="top">
<img src="logovista.png">
</td>
<td width="2%"></td>
</tr>






<tr>
<td width="2%"></td>
<td bgcolor="#FFFFFF" width="48%">



<font size="4" face="arial" color="#08088A">
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;title&gt;primera p&aacute;gina&lt;/title&gt;<br>








&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;p&gt;<br>

<textarea rows="10" cols="55" onchange="cambiarpagina1()" id ="codigo1" class="texto3" />
<p>
<font size="5" color="green" face="Sans-serif">
<p>Mover un planeta en una trayectoria el&iacute;ptica</p>
</font>
</p>
Puedes modificar el c&oacute;digo del canvas y ver como queda la animaci&oacute;n al hacer clic fuera del cuadro de texto.

</textarea><br>
&lt;/p&gt;<br>
&lt;canvas id="canvas" width="<textarea rows="1" cols="4" onchange="cambiaranchuracanvas()" id ="anchocanvas" class="texto3" />500</textarea>" height="<textarea rows="1" cols="4" onchange="cambiaralturacanvas()" id ="altocanvas" class="texto3" />500</textarea>" style="border:1px solid #000000;"&gt;<br>
&lt;/canvas&gt;<br>


&lt;script type="text/javascript"&gt;<br><br>



	
	var contador = 0;<br>
	var anchoimagen = 160;<br>
	var altoimagen = 160;<br>
	var ejemayor = 447;<br>
	var ejemenor = 223;<br>
	var incrementox = 0.1;<br>
	var valorterceraimageny = 0.1;<br>
	var incrementoimagen = 0.1<br>
	var direccion = 0;<br>
	var declinacion = -100;<br>
	var primeraimagenx = 0; <br>
	var primeraimageny = 0;<br>
	var segundaimagenx = 0; <br>
	var segundaimageny = 0;<br>
	var terceraimagenx = -223; <br>
	var terceraimageny = 40;<br>

	primeraimagen = new Image();<br>
	primeraimagen.src = '<textarea rows="1" cols="30" onchange="cambiarimagen1()" id ="imagenuno" class="texto3" />fondodeestrellas.jpg</textarea>'; <br>
        segundaimagen = new Image();<br>
        segundaimagen.src = '<textarea rows="1" cols="30" onchange="cambiarimagen2()" id ="imagendos" class="texto3" />sol1.png</textarea>'; <br>
        terceraimagen = new Image();<br>
        terceraimagen.src = '<textarea rows="1" cols="30" onchange="cambiarimagen3()" id ="imagentres" class="texto3" />tierra1.gif</textarea>'; <br>
	


	radian = Math.PI/180; <br>


	var canvas = document.getElementById("canvas");<br>
	var context = canvas.getContext('2d'); <br>
        context.fillStyle="#FFFFFF";<br>
        context.fillRect(0, 0, canvas.width, canvas.height);<br><br>


	setInterval(loop, 
	<textarea rows="1" cols="4" onchange="cambiarvelocidad()" id ="velocidad" class="texto3" />10</textarea>); <br><br>	


	function loop() { <br><br>

		context.clearRect(0,0,canvas.width, canvas.height); <br>
        	context.fillStyle="<textarea rows="1" cols="9" onchange="cambiarcolorfondo()" id ="fondocolor" class="texto3" />white</textarea>";<br>
                context.fillRect(0, 0, canvas.width, canvas.height);<br>
                context.strokeRect(0, 0, canvas.width, canvas.height);<br>
		rotarimagen(primeraimagen, primeraimagenx, primeraimageny, -contador/<textarea rows="1" cols="2" onchange="cambiartextoreduccion1()" id ="reduc1" class="texto3" />40</textarea>, 1024, 768);<br>
		rotarimagen(segundaimagen, segundaimagenx, segundaimageny, contador/<textarea rows="1" cols="2" onchange="cambiartextoreduccion2()" id ="reduc2" class="texto3" />20</textarea>, 291, 300);<br>
		rotarimagen(terceraimagen, terceraimagenx, terceraimageny, contador/<textarea rows="1" cols="2" onchange="cambiartextoreduccion3()" id ="reduc3" class="texto3" />1</textarea>, anchoimagen, altoimagen);<br><br>



		contador = contador + 0.5;<br><br>









	if(direccion==0){<br><br>

	incrementox = valorterceraimageny/1000;<br><br>

	if(incrementox>0.1){<br>
	incrementox = 0.1;<br>
	}<br><br>

	if(incrementox==0){<br>
	incrementox = 0.001;<br>
	}<br><br>

	terceraimagenx = terceraimagenx + incrementox;<br><br>

	var baseterceraimageny = (1-(Math.pow(terceraimagenx,2)/Math.pow(ejemayor/2,2)))*
Math.pow(ejemenor/2,2);<br><br>

	if(baseterceraimageny<0){<br>
	baseterceraimageny = 0;<br>
	}<br><br>

	valorterceraimageny = Math.sqrt(baseterceraimageny);<br><br>

	terceraimageny = valorterceraimageny - declinacion;<br><br>

	declinacion = declinacion + 0.03;<br><br>

	rotarimagen(segundaimagen, segundaimagenx, segundaimageny, contador/20, 291, 300);<br><br>


	if(valorterceraimageny==0){<br>
	direccion = 1;<br>
	}<br><br>

	anchoimagen = anchoimagen - anchoimagen/2000;<br>
	altoimagen = altoimagen - altoimagen/2000;<br><br>


	}<br><br>

	if(direccion==1){<br><br>

	incrementox = valorterceraimageny/1000;<br><br>

	if(incrementox>0.1){<br>
	incrementox = 0.1;<br>
	}<br><br>

	if(incrementox==0){<br>
	incrementox = 0.001;<br>
	}<br><br>
	
	terceraimagenx = terceraimagenx - incrementox;<br><br>

	var baseterceraimageny = (1-(Math.pow(terceraimagenx,2)/Math.pow(ejemayor/2,2)))*
Math.pow(ejemenor/2,2);<br><br>

	if(baseterceraimageny<0){<br>
	baseterceraimageny = 0;<br>
	}<br><br>

	valorterceraimageny = Math.sqrt(baseterceraimageny);<br><br>

	terceraimageny = -valorterceraimageny - declinacion;<br><br>


	declinacion = declinacion - 0.03;<br><br>



	

	if(valorterceraimageny==0){<br>
	direccion = 0;<br>
	}<br><br>

	anchoimagen = anchoimagen + 0.02;<br>
	altoimagen = altoimagen + 0.02;<br><br>


	}<br><br>














	}<br><br>
	
	
	function rotarimagen(imagen, x, y, angulo, anchoimagen, altoimagen) { <br><br>

		
		context.save(); <br>

		
		context.translate(x+250, y+250);<br>

		
		context.rotate(angulo * radian);<br>

		
		context.drawImage(imagen, -(anchoimagen/2), -(altoimagen/2), anchoimagen, altoimagen);<br>

		
		context.restore(); <br><br>
	}<br><br>

&lt;/script&gt;<br>


&lt;/body&gt;<br>
&lt;/html&gt;<br>





</td>
<td bgcolor="#FFFFFF" width="48%" valign="top">



<p id="contenedor">
</p>

<p id = "canvasaqui">  </p>


<p id="prueba"></p>
<p id="prueba1"></p>
<p id="prueba4"></p>
<p id="prueba2"></p>
<p id="prueba3"></p>

<script>





	window.addEventListener("load", init); 
	

	var imagen1 = 'fondodeestrellas.jpg';
	var imagen2 = 'sol1.png';
	var imagen3 = 'tierra1.gif';
	var contador11;
	var tiempo = 5;
	var primeraimagenx = 0; 
	var primeraimageny = 0;
	var segundaimagenx = 0; 
	var segundaimageny = 0;
	var terceraimagenx = -223; 
	var terceraimageny = 40;
	var reduccion1 = 40;
	var reduccion2 = 20;
	var reduccion3 = 1;
	var textocontador1 = "contador";
	var textocontador2 = "contador";
	var textocontador3 = "contador";
	var anchuracanvas = 500;
	var alturacanvas = 500;
	var colorfondo = "#FFFFFF";
	var contador = 0;

	var anchoimagen = 160;
	var altoimagen = 160;





	var ejemayor = 447;
	var ejemenor = 223;
	var incrementox = 0.1;
	var valorterceraimageny = 0.1;
	var incrementoimagen = 0.1
	var direccion = 0;
	var declinacion = -100;

	primeraimagen = new Image();
	primeraimagen.src = imagen1;
	//primeraimagen.width = 30;
	//primeraimagen.height = 30;
        segundaimagen = new Image();
        segundaimagen.src = imagen2;
        terceraimagen = new Image();
        terceraimagen.src = imagen3;

	radian = Math.PI/180; 


	var micanvas = document.createElement('canvas');
	micanvas.id = 'canvas1';
	micanvas.width = anchuracanvas; 
	micanvas.height = alturacanvas; 
	var context = micanvas.getContext('2d'); 


	document.body.appendChild(micanvas); 
	document.getElementById('canvasaqui').appendChild(micanvas);
        context.fillStyle="black";
        context.fillRect(0, 0, micanvas.width, micanvas.height);
        context.fillRect(0, 0, micanvas.width, micanvas.height);


	function cambiarvelocidad(){
	tiempo = document.getElementById("velocidad").value;
	clearInterval(contador11);
	init();
	}

	function cambiarimagen1(){
	imagen1 = document.getElementById("imagenuno").value;
	primeraimagen.src = imagen1;
	}

	function cambiarimagen2(){
	imagen2 = document.getElementById("imagendos").value;
	segundaimagen.src = imagen2;
	}

	function cambiarimagen3(){
	imagen3 = document.getElementById("imagentres").value;
	terceraimagen.src = imagen3;
	}

	function cambiarimagen4(){
	imagen4 = document.getElementById("imagencuatro").value;
	cuartaimagen.src = imagen4;
	}

	function cambiarimagen1x(){
	primeraimagenx = document.getElementById("imagenunox").value;
	primeraimagenx = 200;
	}

	function cambiarimagen1y(){
	primeraimageny = document.getElementById("imagenunoy").value;
	}

	function cambiarimagen2x(){
	segundaimagenx = document.getElementById("imagendosx").value;
	}

	function cambiarimagen2y(){
	segundaimageny = document.getElementById("imagendosy").value;
	}

	function cambiarimagen3x(){
	terceraimagenx = document.getElementById("imagentresx").value;
	}

	function cambiarimagen3y(){
	terceraimageny = document.getElementById("imagentresy").value;
	}

	function cambiarimagen4x(){
	cuartaimagenx = document.getElementById("imagencuatrox").value;
	}

	function cambiarimagen4y(){
	cuartaimageny = document.getElementById("imagencuatroy").value;
	}

	function cambiartextocontador1(){
	textocontador1 = document.getElementById("texto1contador").value;
	}

	function cambiartextocontador2(){
	textocontador2 = document.getElementById("texto2contador").value;
	}

	function cambiartextocontador3(){
	textocontador3 = document.getElementById("texto3contador").value;
	}

	function cambiartextoreduccion1(){
	reduccion1 = document.getElementById("reduc1").value;
	}

	function cambiartextoreduccion2(){
	reduccion2 = document.getElementById("reduc2").value;
	}

	function cambiartextoreduccion3(){
	reduccion3 = document.getElementById("reduc3").value;
	}


	function cambiaranchuracanvas(){
	anchuracanvas = document.getElementById("anchocanvas").value;
	micanvas.width = anchuracanvas; 
	}

	function cambiaralturacanvas(){
	alturacanvas = document.getElementById("altocanvas").value;
	micanvas.height = alturacanvas; 
	}

	function cambiarcolorfondo(){
	colorfondo = document.getElementById("fondocolor").value;
	}



	function init(){
	contador11 = setInterval(loop, tiempo); 	
	}



	function loop() { 
		context.clearRect(0,0,micanvas.width, micanvas.height); 
        	context.fillStyle=colorfondo;
                context.fillRect(0, 0, micanvas.width, micanvas.height);
                context.strokeRect(0, 0, micanvas.width, micanvas.height);

		rotarimagen(primeraimagen,primeraimagenx,primeraimageny,-contador/reduccion1, 1024, 768);
		rotarimagen(segundaimagen,segundaimagenx,segundaimageny,contador/reduccion2, 291, 300);
		rotarimagen(terceraimagen,terceraimagenx,terceraimageny,contador/reduccion3, anchoimagen, altoimagen); 


		contador = contador + 0.5;

	if(direccion==0){

	incrementox = valorterceraimageny/1000;

	if(incrementox>0.1){
	incrementox = 0.1;
	}

	if(incrementox==0){
	incrementox = 0.001;
	}

	terceraimagenx = terceraimagenx + incrementox;

	var baseterceraimageny = (1-(Math.pow(terceraimagenx,2)/Math.pow(ejemayor/2,2)))*Math.pow(ejemenor/2,2);

	if(baseterceraimageny<0){
	baseterceraimageny = 0;
	}

	valorterceraimageny = Math.sqrt(baseterceraimageny);

	terceraimageny = valorterceraimageny - declinacion;

	declinacion = declinacion + 0.03;
		rotarimagen(segundaimagen,segundaimagenx,segundaimageny,contador/20, 291, 300);


	if(valorterceraimageny==0){
	direccion = 1;
	}

	anchoimagen = anchoimagen - anchoimagen/2000;
	altoimagen = altoimagen - altoimagen/2000;


	}

	if(direccion==1){

	incrementox = valorterceraimageny/1000;

	if(incrementox>0.1){
	incrementox = 0.1;
	}

	if(incrementox==0){
	incrementox = 0.001;
	}
	
	terceraimagenx = terceraimagenx - incrementox;

	var baseterceraimageny = (1-(Math.pow(terceraimagenx,2)/Math.pow(ejemayor/2,2)))*Math.pow(ejemenor/2,2);

	if(baseterceraimageny<0){
	baseterceraimageny = 0;
	}

	valorterceraimageny = Math.sqrt(baseterceraimageny);

	terceraimageny = -valorterceraimageny - declinacion;


	declinacion = declinacion - 0.03;



	}

	if(valorterceraimageny==0){
	direccion = 0;
	}

	anchoimagen = anchoimagen + 0.02;
	altoimagen = altoimagen + 0.02;


	}
	
	
	function rotarimagen(imagen, x, y, angulo, anchoimagen, altoimagen) { 

		// save the current co-ordinate system 
		// before we screw with it
		context.save(); 

		// move to the middle of where we want to draw our image
		context.translate(x+250, y+250);

		// rotate around that point, converting our 
		// angle from degrees to radians 
		context.rotate(angulo * radian);

		// draw it up and to the left by half the width
		// and height of the image 
		context.drawImage(imagen, -(anchoimagen/2), -(altoimagen/2), anchoimagen, altoimagen);

		// and restore the co-ords to how they were when we began
		context.restore(); 
	}
	

	</script>


</td>
<td width="2%"></td>
</tr>






<tr>
<td width="2%"></td>
<td width="96%" colspan=2>


<font size="4" face="arial" color="#4B610B">
<br>
<p></p>
</font>
<br>
</td>
<td width="2%">


</td>
</tr>

<tr>
<td width="2%"></td>
<td width="96%" colspan=2>






<font size="4" face="arial" color="#4B610B">

<p>La variable direccion permite determinar el recorrido el&iacute;ptico de la Tierra, mediante dos funciones (if(direccion==0) e if(direccion==1)). 
En cada una de ellas se asignan valores a la variable terceraimagenx y con ellos se calculan los valores de la variable terceraimageny, 
mediante la expresi&oacute;n: Math.sqrt((1-(Math.pow(terceraimagenx,2)/Math.pow(ejemayor/2,2)))*Math.pow(ejemenor/2,2)) - declinacion. Math.sqrt() 
calcula la raiz cuadrada de lo que se encuentre entre par&eacute;ntesis y Math.pow(terceraimagenx,2) calcula, en este caso, el cuadrado de 
terceraimagenx. El valor de la variable declinacion permite inclinar la elipse.

</p>

<p>
Adem&aacute;s tambi&eacute;n se modifica el tama&ntilde;o de la Tierra de forma paulatina.
</p>


<p>Ejercicio 39.- Dise&ntilde;a un documento web con una animaci&oacute;n que tenga alg&uacute;n objeto astron&oacute;mico que gire y se desplace, creado sobre un 
canvas. Puedes copiar todo el c&oacute;digo y probarlo en <a href="simujavascriptcompleto.html" target = "blanck">esta p&aacute;gina</a>. Has de quitar los saltos de linea que 
generan las ventanas de texto en las &oacute;rdenes primeraimagen.src = "fondodeestrellas.jpg";, y los de las otras im&aacute;genes, y tambi&eacute;n los saltos de la 
orden context.fillStyle="white";, porque sin&oacute; no funciona. </p>
</font>
<br>


</td>
<td width="2%"></td>
</tr>





<tr>
<td width="2%"></td>
<td width="48%" align="right">
<a href="simujavascriptindex.html">
<img src="menu.png" width="65" high"=65"></a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="simujavascript43.html">
<img src="flecha_izqda.png">
</a>
</td>
<td width="48%">
<a href="simujavascript45.html">
<img src="flecha_dcha.png">
</a>
</td>
<td width="2%"></td>
</tr>

</table>


</body>
</html>